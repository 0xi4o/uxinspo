---
import { Image } from '@astrojs/image/components'
import '@/styles/content-card.css'

type Props = {
	alt: string
	aspectRatio: number
	group?: boolean
	src: string | string[]
	tag?: string
	thumbnail?: string
	title?: string
	type?: string
	width: number
}
const {
	alt,
	aspectRatio,
	group = false,
	src,
	tag,
	thumbnail,
	title,
	type = 'image/png',
	width,
} = Astro.props
---

<figure class='flex flex-col'>
	<div>
		{
			Array.isArray(src) && group ? (
				<div class='flex h-auto w-full flex-col gap-8' id='lg'>
					{src.map((img) => (
						<a
							class='image relative flex h-auto w-full border-2 border-white object-cover shadow-[5px_5px_0_0_rgba(250,238,231,0.9)] transition-all duration-200 hover:shadow-none'
							href={img}
						>
							<Image
								alt={alt}
								aspectRatio={aspectRatio}
								src={img}
								width={width}
							/>
						</a>
					))}
				</div>
			) : (
				<div
					class='image relative flex h-auto w-full border-2 border-white object-cover shadow-[5px_5px_0_0_rgba(250,238,231,0.9)] transition-all duration-200 hover:shadow-none'
					id='lg'
				>
					{type === 'video/webm' ? (
						<a
							data-video={`{"source": [{"src": "${src}", "type": "video/webm"}]}`}
							data-poster={thumbnail}
						>
							<Image
								alt={alt}
								aspectRatio={aspectRatio}
								src={thumbnail}
								width={width}
							/>
						</a>
					) : (
						<a href={src}>
							<Image
								alt={alt}
								aspectRatio={aspectRatio}
								src={src}
								width={width}
							/>
						</a>
					)}
				</div>
			)
		}
		<div class='mt-4 flex justify-between px-2'>
			<p class='mt-1 text-xl font-medium leading-6 text-text'>
				{title}
			</p>
			{
				tag ? (
					<p class='px-3 bg-text/10 text-text/50 inline-flex items-center justify-center rounded-lg text-sm'>
						{tag}
					</p>
				) : null
			}
		</div>
	</div>
</figure>

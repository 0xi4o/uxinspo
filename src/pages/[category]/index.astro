---
import { getCollection } from 'astro:content'
import GridLayout from '@/layouts/GridLayout.astro'
import Card from '@/components/Card.astro'

import categories from '@/data/categories'

export function getStaticPaths() {
	return categories.map((category) => ({
		params: { category: category.type },
		props: { type: category.type },
	}))
}

const { type } = Astro.props
const designs = await getCollection('ui', ({ data }) => data.category === type)
---

<GridLayout>
	{
		designs.map((design) => (
			<>
				<Card
					image={{
						alt: `${design.data.product} thumbnail`,
						aspectRatio: 1.7777,
						src: design.data.image,
						width: 410,
					}}
					link={`/${design.slug}`}
					title={design.data.product}
				/>
			</>
		))
	}
</GridLayout>
